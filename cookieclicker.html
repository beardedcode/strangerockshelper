<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moving Cookie Clicker Game</title>
    <style>
        body {
            text-align: center;
            font-family: 'Arial', sans-serif;
            background-color: rgb(15, 15, 15);
            overflow: hidden;
            /* Hide the overflow to keep the cookie within the window */
            margin: 0;
        }

        #gameheader {
            background-color: rgba(179, 224, 164, 0.535);
            width: 100%;
            margin: 0;
            padding: 5px;
            align-items: center;

        }

        #gamewindow {
            height: 100vh;
            width: 100vw;
            background-color: rgba(37, 37, 37, 0.629);
        }

        #cookie {
            width: 150px;
            height: auto;
            position: absolute;
            cursor: pointer;
            z-index: 1000;
        }

        #score {
            font-size: 24px;
            margin-top: 20px;
            color: aliceblue;
        }

        h1 {
            color: white;
        }

        #topScore {
            font-size: 18px;
            color: #13490b;
            /* Red color for visibility */
        }
    </style>
</head>

<body>
    <div id="gameheader">
        <h1>Rune Clicker</h1>
        <p id="score">Score: <span id="scoreValue">0</span></p>
        <p id="topScore">Highscore: <span id="topScoreValue">0</span></p>
    </div>
    <div id="gamewindow"><img id="cookie" src="images/cookie_level_1.png" alt="Cookie" onclick="clickCookie()"></div>
    <script>
        let score = 0;
        let cookieClicked = false;
        let currentLevel = 1;
        let topScore = 0;
        let intervalTime = 1200; // Initial interval time

        function clickCookie() {
            if (!cookieClicked) {
                score++;
                cookieClicked = true;
                updateScore();
                checkLevel();
            }
        }

        function updateScore() {
            document.getElementById('scoreValue').innerText = score;
        }

        function moveCookie() {
        const cookie = document.getElementById('cookie');
        const gamewindow = document.getElementById('gamewindow');
        const gameheader = document.getElementById('gameheader');

        const maxX = gamewindow.clientWidth - cookie.offsetWidth;
        const maxY = gamewindow.clientHeight - cookie.offsetHeight;

        // Update top score if the current score is higher
        if (score > topScore) {
            topScore = score;
            updateTopScore();
        }

        // Reset score to zero only if the cookie hasn't been clicked
        if (!cookieClicked) {
            score = 0;
            currentLevel = 1; // Reset level back to 1
            document.getElementById('cookie').src =
                `images/cookie_level_${currentLevel}.png`; // Reset image to level 1
            updateScore();
        }

        // Reset the cookieClicked flag
        cookieClicked = false;

        const newX = Math.floor(Math.random() * maxX);
        const newY = Math.floor(Math.random() * maxY);

        // Ensure the cookie stays below the gameheader
        if (newY < gameheader.clientHeight) {
            cookie.style.top = gameheader.clientHeight + 'px';
        } else {
            cookie.style.top = newY + 'px';
        }

        cookie.style.left = newX + 'px';
    }


        function checkLevel() {
            if (score % 10 === 0 && currentLevel < 5) {
                // Change image every 10 scores until level 4
                currentLevel++;
                document.getElementById('cookie').src = `images/cookie_level_${currentLevel}.png`;

                // Speed up the interval time after each level
                intervalTime -= 100; // Decrease the interval time by 100 milliseconds

                // Clear the existing interval and set a new one with the updated interval time
                clearInterval(cookieInterval);
                cookieInterval = setInterval(moveCookie, intervalTime);
            }
        }


        function updateTopScore() {
            document.getElementById('topScoreValue').innerText = topScore;
        }

        // Move the cookie with the adjusted interval time
        setInterval(moveCookie, intervalTime);
    </script>


</body>

</html>